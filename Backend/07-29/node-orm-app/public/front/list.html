<!-- html 문서는 html5 버전 표준 문법으로 코딩된 문서 형식
html5는 웹페이지의 구조를 정의하고 콘텐츠를 표시하는데 사용하는 마크업 언어 
html5 버전부터 표준화된 html 문법으로 코딩할 수 있도록 지원함. 

html5부터 web socket 기술을 지원하여 실시간 양방향 통신을 지원함.
웹 소켓은 웹 브라우저와 웹 서버 간의 소켓 연결을 제공하는 기술로,
웹 소켓을 이용하여 서버와 클라이언트 간의 전이중 통신 채널을 제공하고, 실시간으로 데이터를 주고 받을 수 있음. -->

<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>게시글 목록 관리</title>

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="/css/animate.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">

    <!--추가 스타일-->

</head>

<body>

    <div id="wrapper">
        <!-- id 속성을 추가 : id 속성을 추가하여 css 속성을 javascript에서 제어할 수 있도록 하는 고유 식별자 -->

        <!--좌측 메뉴 영역-->
        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav metismenu" id="side-menu">
                    <li class="nav-header">
                        <div class="dropdown profile-element">
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <span class="block m-t-xs font-bold">Example user</span>
                                <span class="text-muted text-xs block">menu <b class="caret"></b></span>
                            </a>
                            <ul class="dropdown-menu animated fadeInRight m-t-xs">
                                <li><a class="dropdown-item" href="login.html">Logout</a></li>
                            </ul>
                        </div>
                        <div class="logo-element">
                            IN+
                        </div>
                    </li>
                    <li class="active">
                        <a href="login.html"><i class="fa fa-th-large"></i> <span class="nav-label">로그인</span></a>
                    </li>
                    <li>
                        <a href="entry.html"><i class="fa fa-th-large"></i> <span class="nav-label">회원가입</span> </a>
                    </li>
                    <li>
                        <a href="/front/list.html"><i class="fa fa-th-large"></i>
                            <span class="nav-label">게시글 목록</span></a>
                    </li>
                    <li>
                        <a href="write.html"><i class="fa fa-th-large"></i> <span class="nav-label">게시글 작성</span> </a>
                    </li>
                </ul>

            </div>
        </nav>

        <!--우측 영역-->
        <div id="page-wrapper" class="gray-bg">

            <!--우측 상단 영역 -->
            <div class="row border-bottom">
                <nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0">
                    <div class="navbar-header">
                        <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i
                                class="fa fa-bars"></i> </a>
                        <form role="search" class="navbar-form-custom" method="post" action="#">
                            <div class="form-group">
                                <input type="text" placeholder="Search for something..." class="form-control"
                                    name="top-search" id="top-search">
                            </div>
                        </form>
                    </div>
                    <ul class="nav navbar-top-links navbar-right">
                        <li>
                            <a href="#">
                                <i class="fa fa-sign-out"></i> Log out
                            </a>
                        </li>
                    </ul>

                </nav>
            </div>

            <!--우측 상단 헤더 영역 -->
            <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-lg-10">
                    <h2>관리자 정보 관리</h2>
                    <ol class="breadcrumb">
                        <li>
                            <a href="/Home/Index">Home </a>>
                        </li>
                        <li>
                            <a>게시글 정보 관리 </a>>
                        </li>
                        <li class="active">
                            <strong>게시글 목록 조회</strong>
                        </li>
                    </ol>
                </div>
                <div class="col-lg-2">

                </div>
            </div>

            <!--우측 콘텐츠 영역 -->
            <div class="wrapper wrapper-content">

                <div class="ibox-content m-b-sm border-bottom">
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label class="control-label" for="OrderNo">글 제목</label>
                                <input type="text" id="title" class="form-control">
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label class="control-label" for="OrderName">IP 주소</label>
                                <input type="text" id="ipaddress" class="form-control">
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label class="control-label" for="MobileNo">게시 여부</label>
                                <select id="display" class="form-control">
                                    <option value="9" selected>전체</option>
                                    <option value="1">게시함</option>
                                    <option value="0">게시 안 함</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <button type="button" id="btnSearch" class="btn btn-primary">조회</button>
                        <a href="/front/create.html" class="btn btn-info">신규 게시글 작성</a>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-12">
                        <div class="ibox float-e-margins">
                            <div class="ibox-content">
                                <div class="table-responsive">

                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th width="10%">게시글 번호</th>
                                                <th width="50%">제목</th>
                                                <th width="5%">IP주소</th>
                                                <th width="5%">조회수</th>
                                                <th width="10%">게시 여부</th>
                                                <th width="10%">등록자 번호</th>
                                                <th width="10%">등록 일시</th>
                                            </tr>
                                        </thead>
                                        <tbody class="hoverTblBody" id="list">

                                            <!-- <tr>
                                                <td>1</td>
                                                <td><a href="/front/modify?id=1">게시글 제목1</a></td>
                                                <td>111.111.111.111</td>
                                                <td>10</td>
                                                <td>1</td>
                                                <td>1</td>
                                                <td>2024-07-24</td>
                                            </tr> -->

                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                    </div>

                </div>


            </div>

            <!--우측 하단 풋터 영역-->
            <div class="footer">
                <div class="pull-right">
                    10GB of <strong>250GB</strong> Free.
                </div>
                <div>
                    <strong>Copyright</strong> Example Company &copy; 2014-2018
                </div>
            </div>

        </div>
    </div>

    <!-- Mainly scripts -->
    <!-- JQuery 라이브러리는 순수 자바스크립트 코딩의 생산성을 향상시켜주는 개발 생산/효율성 지원 오픈소스 라이브러리는
    프론트엔드 프레임워크(React(next.js), Vue.js, Angular.js)등이 나타나기 전 가장 많이 사용한 프론트엔트 코딩 라이브러리
    헌재도 여러 분야에서 유효하게 사용됨(관리자 사이트 등등) -->

    <!-- JQuery 라이브러리는 웹페이지의 DOM(Document Object Model)을 제어하는데 사용하는 자바스크립트 라이브러리
    JQuery 라이브러리 참조를 위한 script 태그를 추가하고, JQuery 라이브러리를 사용하여 웹페이지의 DOM을 제어함. -->
    <script src="/js/jquery-3.1.1.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="/js/inspinia.js"></script>
    <script src="/js/plugins/pace/pace.min.js"></script>


    <!--추가 스크립트-->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


    <script>
        /*
        웹페이지 데이터 요청과 응답 처리 과정
        Step 1. 웹 서버에서 웹 페이지를 요청함. (HTML, CSS, JS)
        Step 2. 브라우저 웹페이지를 수신함. (HTML, CSS, JS)
        Step 3. 백엔드에서 REST API 주소를 호출하여 데이터를 가져옴. (JQuery AJAX 사용)
        Step 4. 브라우저 데이터를 수신하여 웹페이지에 추가함. (JQuery 사용)
        */

        //JQuery 사용을 위한 $변수 선언
        //현재 html 문서가 웹브라우저에 모두 로딩이 완료되면 지정한 콜백함수 실행
        //ready(콜백함수);
        $(document).ready(function () {

            //JQuery의 AJAX를 이용해 백엔드 REST API 주소를 호출하여 데이터를 가져옴.
            //get('백엔드 REST APU 주소', 콜백함수(서버에서 보내준 데이터)); -> get 방식으로 데이터를 요청
            $.get('http://localhost:3000/api/articles/list', function (result) {

                //웹브라우저 개발 도구 콘솔 탭에 로깅함. (데이터가 잘 수신되었는지 확인)
                console.log("백엔드 RESTful API 서버에서 제공된 데이터 :", result);

                //REST API 서버에서 제공된 데이터 수만큼 반복적으로
                //동적으로 HTML 소스를 추가해 웹페이지 특정 요소에 자식 요소 추가

                //데이터 목록을 반복해서 작업할 때 사용
                //.each('배열 데이터', 배열에서 하나씩 꺼내 로직을 구현하는 함수);
                $.each(result.data, function (index, item) {
                    const trTag = `<tr>
                                        <td>${item.article_id}</td>
                                        <td><a href="/front/modify.html?id=${item.article_id}">${item.title}</a></td>
                                        <td>${item.ip_address}</td>
                                        <td>${item.view_cnt}</td>
                                        <td>${item.display}</td>
                                        <td>${item.regist_id}</td>
                                        <td>${item.regist_date}</td>
                                    </tr>`;

                    //$("html id값으로 html 요소를 불러옴").append(추가할 html 요소);
                    //id=list인 tbody 태그를 찾아서 태그 안에 trTag 추가
                    //id일 경우 #을 사용하고, class일 경우 .을 사용하여 찾음.
                    $("#list").append(trTag);
                });
            });
        });
    </script>


</body>

</html>